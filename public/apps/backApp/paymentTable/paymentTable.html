<div>
    <div class="row">
        <div class="col-md-4">
            <h5>
                <label>
                    <input type="checkbox" ng-model="tableConfig.init.cols.pik"/>ПИК — Поставщик Имя Компания
                </label>
            </h5>
            <h5>
                <label>
                    <input type="checkbox" ng-model="tableConfig.init.cols.pc"/>ПС — Поставщик сумма
                </label>
            </h5>
            <h5>
                <label>
                    <input type="checkbox" ng-model="tableConfig.init.cols.pndpp"/>ПНДПП — Поставщик номер и дата П/П
                </label>
            </h5>
            <h5>
                <label>
                    <input type="checkbox" ng-model="tableConfig.init.cols.pks"/>ПКС — Поставщик комиссия сумма
                </label>
            </h5>
            <h5>
                <label>
                    <input type="checkbox" ng-model="tableConfig.init.cols.pkp"/>ПКП — Поставщик процент комиссия
                </label>
            </h5>
            <h5>
                <label>
                    <input type="checkbox" ng-model="tableConfig.init.cols.pki"/>ПКИ — Поставщик комиссия итог
                </label>
            </h5>

        </div>
        <div class="col-md-4">
            <h5>
                <label>
                    <input type="checkbox" ng-model="tableConfig.init.cols.ai"/>АИ — Агент имя
                </label>
            </h5>
            <h5>
                <label>
                    <input type="checkbox" ng-model="tableConfig.init.cols.aic"/>АКС — Агент комиссия сумма
                </label>
            </h5>
            <h5>
                <label>
                    <input type="checkbox" ng-model="tableConfig.init.cols.akp"/>АКП — Агент комиссия процент
                </label>
            </h5>

            <h5>
                <label>
                    <input type="checkbox" ng-model="tableConfig.init.cols.aku"/>АКИ — Агент комиссия итог
                </label>
            </h5>

            <h5>
                <label>
                    <input type="checkbox" ng-model="tableConfig.init.cols.oks"/>ОКС — Оператор комиссия сумма
                </label>
            </h5>
            <h5>
                <label>
                    <input type="checkbox" ng-model="tableConfig.init.cols.okp"/>ОКП — Оператор комиссия процент
                </label>
            </h5>
            <h5>
                <label>
                    <input type="checkbox" ng-model="tableConfig.init.cols.oki"/>ОКИ — Оператор комиссия итог

                </label>
            </h5>

        </div>
        <div class="col-md-4">
            <h5>
                <label>
                    <input type="checkbox" ng-model="tableConfig.init.cols.zik"/>ЗИК — Заказчик Имя Компания
                </label>
            </h5>

            <h5>
                <label>
                    <input type="checkbox" ng-model="tableConfig.init.cols.znlpp"/>ЗНДПП — Заказчик номер и дата П/П
                </label>
            </h5>
            <h5>
                <label>
                    <input type="checkbox" ng-model="tableConfig.init.cols.zks"/>ЗКС — Заказчик комиссия сумма
                </label>
            </h5>
            <h5>
                <label>
                    <input type="checkbox" ng-model="tableConfig.init.cols.zkp"/>ЗКП — Заказчик комиссия процент
                </label>
            </h5>
            <h5>
                <label>
                    <input type="checkbox" ng-model="tableConfig.init.cols.zki"/>ЗКИ — Заказчик комиссия итог
                </label>
            </h5>
            <h5>
                <label>
                    <input type="checkbox" ng-model="tableConfig.init.cols.zsi"/>ЗСИ — Заказчик сумма итог

                </label>
            </h5>
        </div>
    </div>

    <div class="text-right">


        <select class="form-control dibM" style="width: 200px;margin-right: 30px;" ng-show="!filters"
                ng-model="tableConfig.init.filters.article_id"
                ng-options="article.id as article.value for article in env.articles">
            <option value="">Все статьи</option>
            <option value="Cash in ">Cash in </option>
            <option value="Cash out">Cash out</option>
            <option value="Transit">Transit</option>
            <option value="Convert">Convert</option>
            <option value="Other">Other</option>
        </select>

    </div>

    <div tasty-table   bind-resource-callback="getResource"  bind-init="tableConfig.init"  bind-filters="tableConfig.init.filters">

        <table class="table table-striped table-hover table-bordered" >
            <thead>
            <tr>
                <th></th>
                <th>НП</th>
                <th>ДП</th>
                <th ng-show="tableConfig.init.cols.pik">ПИК</th>
                <th ng-show="tableConfig.init.cols.pc">ПС</th>
                <th ng-show="tableConfig.init.cols.pndpp">ПНДПП</th>
                <th ng-show="tableConfig.init.cols.pks">ПКС</th>
                <th ng-show="tableConfig.init.cols.pkp">ПКП</th>
                <th ng-show="tableConfig.init.cols.pki">ПКИ</th>
                <th ng-show="tableConfig.init.cols.oks">ОКС</th>
                <th ng-show="tableConfig.init.cols.okp">ОКП</th>
                <th ng-show="tableConfig.init.cols.oki">ОКИ</th>



                <th ng-show="tableConfig.init.cols.ai">АИ</th>
                <th ng-show="tableConfig.init.cols.aic">АКС</th>
                <th ng-show="tableConfig.init.cols.akp">АКП</th>
                <th ng-show="tableConfig.init.cols.aku">АКИ</th>
                <th ng-show="tableConfig.init.cols.zik">ЗИК</th>
                <th ng-show="tableConfig.init.cols.znlpp">ЗНДПП</th>
                <th ng-show="tableConfig.init.cols.zks">ЗКС</th>
                <th ng-show="tableConfig.init.cols.zkp">ЗКП</th>
                <th ng-show="tableConfig.init.cols.zki">ЗКИ</th>
                <th ng-show="tableConfig.init.cols.zsi">ЗСИ</th>
            </tr>
            </thead>
            <tbody ng-repeat="row in rows" >
            <tr style="cursor: pointer" ng-repeat="agent in row.agents" ng-show="row.agents.length>0">

                <td ng-show="$index==0" rowspan="{{row.agents.length}}"><input type="checkbox" ng-model="env.selectedPayments[row.id]"></td>
                <td ng-click="edit(row.id)" ng-show="$index==0" rowspan="{{row.agents.length}}">{{row.payment_number}}</td>
                <td ng-click="edit(row.id)" ng-show="$index==0" rowspan="{{row.agents.length}}">{{row.payment_date|date:'dd-MM-yyyy'}}</td>

                <td ng-click="edit(row.id)" ng-show="tableConfig.init.cols.pik && $index==0" rowspan="{{row.agents.length}}">{{row.supplier_agent.name}}<br>{{row.supplier_company.name}}</td>
                <td ng-click="edit(row.id)" ng-show="tableConfig.init.cols.pc && $index==0"  rowspan="{{row.agents.length}}">{{row.supplier_amount|currency:row.supplier_amount_currency}}</td>
                <td ng-click="edit(row.id)" ng-show="tableConfig.init.cols.pndpp && $index==0" rowspan="{{row.agents.length}}">{{row.supplier_number_pp}} <br>{{row.supplier_date_pp|date:'dd-MM-yyyy'}}</td>
                <td ng-click="edit(row.id)" ng-show="tableConfig.init.cols.pks && $index==0"  rowspan="{{row.agents.length}}">{{row.supplier_commission_fix|currency:row.supplier_commission_currency}} </td>
                <td ng-click="edit(row.id)" ng-show="tableConfig.init.cols.pkp && $index==0"  rowspan="{{row.agents.length}}">{{row.supplier_commission_percent}}%</td>
                <td ng-click="edit(row.id)" ng-show="tableConfig.init.cols.pki && $index==0"  rowspan="{{row.agents.length}}">{{row.supplier_result|currency:row.supplier_commission_currency}}</td>



                <td ng-click="edit(row.id)" ng-show="tableConfig.init.cols.okp && $index==0"  rowspan="{{row.agents.length}}">{{row.operator_commission_fix|currency:row.operator_commission_currency}} </td>
                <td ng-click="edit(row.id)" ng-show="tableConfig.init.cols.oks && $index==0"  rowspan="{{row.agents.length}}">{{row.operator_commission_percent}}%</td>
                <td ng-click="edit(row.id)" ng-show="tableConfig.init.cols.oki && $index==0"  rowspan="{{row.agents.length}}">{{row.operator_result|currency:row.operator_commission_currency}}</td>


                <td ng-click="edit(row.id)" ng-show="tableConfig.init.cols.ai" >{{getAgentById(agent.agent_id).name}}</td>
                <td ng-click="edit(row.id)" ng-show="tableConfig.init.cols.aic">{{agent.commission_fix|currency:agent.commission_currency}}</td>
                <td ng-click="edit(row.id)" ng-show="tableConfig.init.cols.akp">{{agent.commission_percent ? agent.commission_percent+'%' : ''}}</td>
                <td ng-click="edit(row.id)" ng-show="tableConfig.init.cols.aku">{{agent.result|currency:agent.commission_currency}}</td>


                <td ng-click="edit(row.id)" ng-show="tableConfig.init.cols.zik && $index==0" rowspan="{{row.agents.length}}">{{row.client_agent.name}}<br>{{row.client_company.name}}</td>
                <td ng-click="edit(row.id)" ng-show="tableConfig.init.cols.znlpp && $index==0"  rowspan="{{row.agents.length}}">{{row.client_number_pp}}<br>{{row.client_date_pp}}</td>
                <td ng-click="edit(row.id)" ng-show="tableConfig.init.cols.zks && $index==0"  rowspan="{{row.agents.length}}">{{row.client_commission_fix|currency:row.client_commission_currency}}</td>
                <td ng-click="edit(row.id)" ng-show="tableConfig.init.cols.zkp && $index==0"  rowspan="{{row.agents.length}}">{{row.client_commission_percent}}%</td>
                <td ng-click="edit(row.id)" ng-show="tableConfig.init.cols.zki && $index==0"  rowspan="{{row.agents.length}}">{{row.client_result|currency:row.client_commission_currency}}</td>

                <td ng-click="edit(row.id)" ng-show="tableConfig.init.cols.zsi && $index==0"  rowspan="{{row.agents.length}}">{{row.total|currency:row.client_amount_currency}}</td>
            </tr>

            <tr  ng-show="row.agents.length==0" style="cursor: pointer" >
                <td ><input type="checkbox" ng-model="env.selectedPayments[row.id]" ></td>

                <td ng-click="edit(row.id)" >{{row.payment_number}}</td>
                <td ng-click="edit(row.id)" >{{row.payment_date|date:'dd-MM-yyyy'}}</td>
                <td ng-click="edit(row.id)"  ng-show="tableConfig.init.cols.pik">{{row.supplier_agent.name}}<br>{{row.supplier_company.name}}</td>
                <td ng-click="edit(row.id)"  ng-show="tableConfig.init.cols.pc">{{row.supplier_amount|currency:row.supplier_amount_currency}}</td>
                <td ng-click="edit(row.id)"  ng-show="tableConfig.init.cols.pndpp">{{row.supplier_number_pp}} <br>{{row.supplier_date_pp|date:'dd-MM-yyyy'}}</td>
                <td ng-click="edit(row.id)" ng-show="tableConfig.init.cols.pks">{{row.supplier_commission_fix|currency:row.supplier_commission_currency}} </td>
                <td ng-click="edit(row.id)" ng-show="tableConfig.init.cols.pkp">{{row.supplier_commission_percent}}%</td>
                <td ng-click="edit(row.id)" ng-show="tableConfig.init.cols.pki">{{row.supplier_result|currency:row.supplier_commission_currency}}</td>

                <td ng-click="edit(row.id)" ng-show="tableConfig.init.cols.okp">{{row.operator_commission_fix|currency:row.operator_commission_currency}} </td>
                <td ng-click="edit(row.id)" ng-show="tableConfig.init.cols.oks">{{row.operator_commission_percent}}%</td>
                <td ng-click="edit(row.id)" ng-show="tableConfig.init.cols.oki">{{row.operator_result|currency:row.operator_commission_currency}}</td>

                <td ng-click="edit(row.id)" ng-show="tableConfig.init.cols.ai" >-</td>
                <td ng-click="edit(row.id)" ng-show="tableConfig.init.cols.aic">-</td>
                <td ng-click="edit(row.id)" ng-show="tableConfig.init.cols.akp">-</td>
                <td ng-click="edit(row.id)" ng-show="tableConfig.init.cols.aku">-</td>

                <td ng-click="edit(row.id)" ng-show="tableConfig.init.cols.zik">{{row.client_agent.name}}<br>{{row.client_company.name}}</td>
                <td ng-click="edit(row.id)" ng-show="tableConfig.init.cols.znlpp">{{row.client_number_pp}}<br>{{row.client_date_pp}}</td>
                <td ng-click="edit(row.id)" ng-show="tableConfig.init.cols.zks">{{row.client_commission_fix|currency:row.client_commission_currency}}</td>
                <td ng-click="edit(row.id)" ng-show="tableConfig.init.cols.zkp">{{row.client_commission_percent}}%</td>
                <td ng-click="edit(row.id)" ng-show="tableConfig.init.cols.zki">{{row.client_result|currency:row.client_commission_currency}}</td>

                <td ng-click="edit(row.id)" ng-show="tableConfig.init.cols.zsi">{{row.total|currency:row.client_amount_currency}}</td>
            </tr>
            </tbody>
        </table>
        <div tasty-pagination ></div>
    </div>

    <div class="pull-right">
        <a ng-click="removeSelected(env.selectedPayments)" type="button" ng-disabled="env.selectedPayments.length==0" class="btn btn-danger" >Удалить</a>
        <a ng-click="pdfExport()" type="button" class="btn btn-success" target="_blank">Экспорт в PDF</a>
    </div>
    <div class="clearfix"></div>
</div>